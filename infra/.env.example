# Docker Compose env file. Escape $ as $$ to avoid interpolation warnings.
#
# === LOCAL MODE (contributors) ===
# Use safe defaults and localhost-oriented settings.
#
# === HOST MODE (production-like) ===
# Override HOST values in infra/.env on the server:
# - Set DJANGO_ALLOWED_HOSTS to your domain(s)
# - Use strong, unique secrets (DJANGO_SECRET_KEY, REALTIME_JWT_SECRET)
# - Set RATE_LIMITS_ENABLED=true unless intentionally disabled
# - Ports bind to 127.0.0.1; expose via Cloudflare Tunnel or a reverse proxy only.
# - Example hosts: DJANGO_ALLOWED_HOSTS=api.self-link.com
# - Optional Gunicorn tuning (defaults: 4 workers, 60s timeout, 1000 max requests)
#   GUNICORN_WORKERS=4
#   GUNICORN_TIMEOUT=60
#   GUNICORN_MAX_REQUESTS=1000
#   GUNICORN_MAX_REQUESTS_JITTER=100
DJANGO_SECRET_KEY="%NvKkY@9qHUx5nW5usB%1=4&bb$$sGNGd)fTnhu2a*xT=7T^R2RpPF^6zPxJY&A"
DJANGO_DEBUG=false
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,10.0.2.2
STORAGE_BACKEND=local
SERVE_MEDIA=false
# Use Docker service hostnames inside containers (not localhost).
DATABASE_URL=postgres://selflink:selflink@pgbouncer:6432/selflink
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
REDIS_URL=redis://redis:6379/0
PUBSUB_REDIS_URL=redis://redis:6379/1
CORS_ALLOWED_ORIGINS=http://localhost:5173,localhost:5173,http://10.0.2.2:8082
JWT_SIGNING_KEY="%NvKkY@9qHUx5nW5usB%1=4&bb$$sGNGd)fTnhu2a*xT=7T^R2RpPF^6zPxJY&A"
REALTIME_JWT_SECRET="%NvKkY@9qHUx5nW5usB%1=4&bb$$sGNGd)fTnhu2a*xT=7T^R2RpPF^6zPxJY&A"
REALTIME_REDIS_URL=redis://redis:6379/1
# Legacy Channels routing (ASGI /ws) stays off by default.
REALTIME_CHANNELS_ENABLED=false
OPENSEARCH_ENABLED=false
OPENSEARCH_HOST=opensearch
OPENSEARCH_PORT=9200
OPENSEARCH_USER=
OPENSEARCH_USERNAME=
OPENSEARCH_PASSWORD=
OPENSEARCH_INITIAL_ADMIN_PASSWORD=admin
SWISSEPH_DATA_PATH=./astro_data
ASTRO_RULES_VERSION=v1
MATCH_RULES_VERSION=v1
RECO_DEFAULT_LIMIT=200
RECO_MAX_FOLLOWS=200
MENTOR_LLM_ENABLED=false
MENTOR_LLM_PROVIDER=mock
MENTOR_LLM_MODEL=gpt-4o-mini
OPENAI_API_KEY=
# Use stable hostnames for LLM endpoints; avoid changing LAN IPs.
# Example (host mode, Ollama on another machine): http://192.168.0.102:11434
# Ollama must listen on 0.0.0.0:11434 (not 127.0.0.1) to be reachable from a host like 192.168.0.104.
MENTOR_LLM_BASE_URL=
OLLAMA_HOST=http://localhost:11434
MENTOR_LLM_TIMEOUT=60
RATE_LIMITS_ENABLED=false
MENTOR_RPS_USER=2
MENTOR_RPS_GLOBAL=20
AUTH_RPS_IP=5
COIN_FEE_BPS=100
COIN_FEE_MIN_CENTS=25
COIN_THROTTLE_TRANSFER=30/min
COIN_THROTTLE_SPEND=60/min
STRIPE_API_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_ALLOWED_CURRENCIES=USD,EUR,GEL
STRIPE_CHECKOUT_MIN_CENTS=50
STRIPE_CHECKOUT_SUCCESS_URL=http://localhost:3000/payments/success
STRIPE_CHECKOUT_CANCEL_URL=http://localhost:3000/payments/cancel
PAYMENTS_CHECKOUT_SUCCESS_URL=http://localhost:3000/payments/success
PAYMENTS_CHECKOUT_CANCEL_URL=http://localhost:3000/payments/cancel
BTCPAY_BASE_URL=
BTCPAY_API_KEY=
BTCPAY_STORE_ID=
BTCPAY_WEBHOOK_SECRET=
BTCPAY_SIGNATURE_HEADER=HTTP_BTCPAY_SIG
BTCPAY_ALLOWED_CURRENCIES=USD,EUR
BTCPAY_PAID_STATUSES=settled
BTCPAY_FAILED_STATUSES=expired,invalid
BTCPAY_AMOUNT_IN_CENTS=false
BTCPAY_TIMEOUT_SECONDS=10
THROTTLE_USER_RATE=120/min
THROTTLE_ANON_RATE=60/min
MODERATION_BANNED_WORDS=spam,scam,offensive
GITHUB_WEBHOOK_SECRET=
MINIO_ROOT_USER=selflink
MINIO_ROOT_PASSWORD=selflinkpass
# S3/MinIO (only when STORAGE_BACKEND=s3)
S3_ENDPOINT=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_BUCKET=
S3_QUERYSTRING_AUTH=true
